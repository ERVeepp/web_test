import{e as _,D as V,d as ee,A as te,r as i,k as b,i as r,v as s,x as t,h as n,j as l,a as le,ac as L,b as F,af as oe,t as T,z as E,q as ae,s as ne}from"./vendor-6e462d07.js";import{u as ue}from"./useCommon-dfe6a999.js";import{_ as re,b as ie,s as se,a as z}from"./index-07a9b6a7.js";import{u as de}from"./useElement-72e9e6d5.js";function ce(m){const v=_(1),B=_(10),y=h=>{v.value=h,m()},k=h=>{B.value=h,m()};return V(()=>{}),{pageNum:v,pageSize:B,handleCurrentChange:y,handleSizeChange:k}}const pe=m=>(ae("data-v-3cea67e6"),m=m(),ne(),m),me={class:"errorLogContainer"},ge={class:"mr-3 rowSS"},_e=E("\u9519\u8BEF\u65E5\u5FD7\u6D4B\u8BD5"),he=pe(()=>s("span",{style:{"vertical-align":"middle"}},"\u5220\u9664",-1)),fe=E("\u67E5\u8BE2"),Ce=E(" click it console to platform to track "),Fe=E("\u5220\u9664"),Ee={class:"block columnCC mt-2"},ve={class:"detail-container rowBC elODialogModalBodyH60vh"},Be={class:"detail-container-item"},De={class:"detail-container rowBC elODialogModalBodyH60vh"},be={key:0,class:"detail-container-item",style:{color:"green"}},ye={key:1,class:"detail-container-item"},ke={class:"detail-container rowBC elODialogModalBodyH60vh"},we={class:"detail-container-item"},xe={class:"dialog-footer"},Ae=E("\u786E \u5B9A"),Se={key:1,src:"http://img.png"},Ve=ee({setup(m){let v=_("testData");V(()=>{console.log("testData",v)});const B=()=>{throw new Error("\u4EA7\u751F\u7684\u9519\u8BEF\u65E5\u5FD7")},y=e=>{console.error("custom"+e)};let k=_(!1),h=_([]),d=te({errorLog:"",pageUrl:"8.135.1.141",createTime:"",id:""}),{totalPage:P,startEndArr:D,dialogTitle:Y,detailDialog:c}=ue(),f=()=>{const e=Object.assign(d,{pageNum:w,pageSize:U});Object.keys(e).forEach(a=>{(e[a]===""||e[a]===null||e[a]===void 0)&&delete e[a]}),z({url:"/integration-front/errorCollection/selectPage",method:"get",data:e,isParams:!0,bfLoading:!1,isAlertErrorMsg:!1}).then(a=>{var C,p;h.value=(C=a.data)==null?void 0:C.records,P.value=(p=a.data)==null?void 0:p.total})},{pageNum:w,pageSize:U,handleCurrentChange:H,handleSizeChange:N}=ce(f);const q=e=>{e&&e.length===2?(d.startTime=e[0],d.endTime=e[1]):(d.startTime="",d.endTime="")};V(()=>{f(),ie.on("reloadErrorPage",()=>{f()})});const O=()=>{w.value=1,f()};let x=_({}),{elConfirm:M,elMessage:A}=de(),$=e=>z({url:"/integration-front/errorCollection/deleteById",data:{id:e},isParams:!0,method:"delete",bfLoading:!0}),I=async e=>{await M("\u786E\u5B9A",`\u60A8\u786E\u5B9A\u8981\u5220\u9664\u3010${e.pageUrl}\u3011\u5417\uFF1F`).then(()=>{$(e.id).then(()=>{f(),A(`\u3010${e.pageUrl}\u3011\u5220\u9664\u6210\u529F`)})}).catch(()=>{})},j=_([]);const R=e=>{j.value=e},W=async()=>{let e=[],o="";if(e=j.value.map(p=>(o=o+p.pageUrl+",",p.id)),e.length===0){A("\u8868\u683C\u9009\u9879\u4E0D\u80FD\u4E3A\u7A7A","warning");return}let a=o.length-1;await M("\u5220\u9664",`\u60A8\u786E\u5B9A\u8981\u5220\u9664\u3010${o.slice(0,a)}\u3011\u5417`),z({url:"/integration-front/errorCollection/deleteBatchIds",data:e,method:"DELETE",bfLoading:!0}).then(()=>{A("\u5220\u9664\u6210\u529F"),f()})};return(e,o)=>{const a=i("el-button"),C=i("el-icon"),p=i("el-input"),S=i("el-form-item"),G=i("el-date-picker"),J=i("el-form"),g=i("el-table-column"),K=i("el-table"),Q=i("el-pagination"),X=i("el-dialog");return F(),b("div",me,[r("\u64CD\u4F5C"),s("div",ge,[t(a,{type:"primary",onClick:B},{default:n(()=>[_e]),_:1}),t(a,{type:"primary",onClick:W},{default:n(()=>[r(" \u611F\u89C9\u5199\u6CD5\u590D\u6742\u4E86"),t(C,{style:{"vertical-align":"middle"}},{default:n(()=>[t(l(oe))]),_:1}),he]),_:1}),r("\u6761\u4EF6\u641C\u7D22"),t(J,{ref:"refsearchForm",inline:!0,class:"demo-searchForm ml-2"},{default:n(()=>[t(S,{"label-width":"0px",label:"",prop:"errorLog","label-position":"left"},{default:n(()=>[t(p,{modelValue:l(d).errorLog,"onUpdate:modelValue":o[0]||(o[0]=u=>l(d).errorLog=u),class:"widthPx-150",placeholder:"\u9519\u8BEF\u65E5\u5FD7"},null,8,["modelValue"])]),_:1}),t(S,{"label-width":"0px",label:"",prop:"pageUrl","label-position":"left"},{default:n(()=>[t(p,{modelValue:l(d).pageUrl,"onUpdate:modelValue":o[1]||(o[1]=u=>l(d).pageUrl=u),class:"widthPx-150",placeholder:"\u9875\u9762\u8DEF\u5F84"},null,8,["modelValue"])]),_:1}),t(S,{"label-width":"0px",label:"",prop:"createTime","label-position":"left"},{default:n(()=>[t(G,{modelValue:l(D),"onUpdate:modelValue":o[2]||(o[2]=u=>L(D)?D.value=u:D=u),type:"datetimerange",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD HH:mm:ss",class:"widthPx-250","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",onChange:q},null,8,["modelValue"])]),_:1})]),_:1},512),r("\u67E5\u8BE2\u6309\u94AE"),t(a,{onClick:O},{default:n(()=>[fe]),_:1})]),r("\u8868\u683C\u548C\u5206\u9875"),t(K,{id:"resetElementDialog",ref:"refuserTable",height:`calc(100vh - ${l(se).delWindowHeight})`,border:"",data:l(h),onSelectionChange:R},{default:n(()=>[t(g,{type:"selection",align:"center",width:"50"}),t(g,{align:"center",prop:"errorLog",label:"\u9519\u8BEF\u65E5\u5FD7",width:"450"},{default:n(({row:u})=>[s("div",null,T(u.errorLog),1),t(a,{type:"text",size:"small",onClick:Z=>y(u.errorLog)},{default:n(()=>[Ce]),_:2},1032,["onClick"])]),_:1}),t(g,{align:"center",prop:"pageUrl",label:"\u9875\u9762\u8DEF\u5F84","min-width":"180"}),t(g,{align:"center",prop:"version",label:"\u7248\u672C\u53F7",width:"60"}),t(g,{align:"center",prop:"browserType",label:"\u6D4F\u89C8\u5668\u7C7B\u578B","min-width":"180"}),t(g,{align:"center",prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",width:"140"}),r("\u70B9\u51FB\u64CD\u4F5C"),t(g,{fixed:"right",align:"center",label:"\u64CD\u4F5C",width:"80"},{default:n(({row:u})=>[t(a,{type:"text",size:"small",onClick:Z=>l(I)(u)},{default:n(()=>[Fe]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["height","data"]),r("\u5206\u9875"),s("div",Ee,[t(Q,{"current-page":l(w),"page-sizes":[10,20,50,100],"page-size":l(U),layout:"total, sizes, prev, pager, next, jumper",total:l(P),onSizeChange:l(N),onCurrentChange:l(H)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),r("\u8BE6\u60C5"),l(c)?(F(),le(X,{key:0,modelValue:l(c),"onUpdate:modelValue":o[4]||(o[4]=u=>L(c)?c.value=u:c=u),title:l(Y),width:"40vw","close-on-click-modal":!1},{footer:n(()=>[s("span",xe,[t(a,{type:"primary",onClick:o[3]||(o[3]=u=>L(c)?c.value=!1:c=!1)},{default:n(()=>[Ae]),_:1})])]),default:n(()=>[s("div",ve,[s("div",Be,"DBC\u6587\u4EF6\u540D\uFF1A"+T(l(x).username),1)]),s("div",De,[l(x).status===1?(F(),b("div",be,"\u72B6\u6001\uFF1A \u542F\u7528")):(F(),b("div",ye,"\u72B6\u6001\uFF1A \u505C\u7528"))]),s("div",ke,[s("div",we,"\u8BF4\u660E\uFF1A"+T(l(x).remark),1)])]),_:1},8,["modelValue","title"])):r("v-if",!0),r("\u56FE\u7247\u9519\u8BEFdemo"),l(k)?(F(),b("img",Se)):r("v-if",!0)])}}});var Ue=re(Ve,[["__scopeId","data-v-3cea67e6"]]);export{Ue as default};
